%% Version: 1.2.0 (Authoritative Protocol Layer)
%% Role-Based Architecture with Commander Priority

classDiagram
    direction TB

    class Commander {
        <<Meta-Orchestrator>>
        +Priority: 0
        +defineTask(task)
        +injectContext(taskId)
        +enforceProtocol()
        +preventDrift()
        +authorizeLifecycle()
    }

    class Architect {
        +Priority: 1
        +decompose(task)
        +designStructure()
    }

    class Coder {
        +Priority: 2
        +implementSpec(spec)
        +modifyFiles()
    }

    class Reasoner {
        +Priority: 2
        +validateLogic()
        +analyzeEdgeCases()
    }

    class Synthesizer {
        +Priority: 3
        +mergeOutputs()
        +finalizeDeliverable()
    }

    %% Authoritative Hierarchy
    Commander --> Architect : Directs
    Commander --> Coder : Directs
    Commander --> Reasoner : Directs
    Commander --> Synthesizer : Directs

    Architect ..> Coder : Context Spec
    Architect ..> Reasoner : Analysis Req
    Coder --|> Synthesizer : Artifacts
    Reasoner --|> Synthesizer : Validation

    %% Commander is the shared authority point
    subgraph Authority
        Commander
    end

    note for Commander "Authoritative initializer; enforces protocol and prevents architectural drift"
    note for Architect "System design and task decomposition"
    note for Coder "Executable implementation and testing"
    note for Reasoner "Logical verification and problem solving"
    note for Synthesizer "Final synthesis and executive summary"
